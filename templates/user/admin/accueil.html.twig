{% extends 'base.html.twig' %}

{% block title %}Page d'accueil Administrateur !{% endblock %}

{% block body %}
<!-- Ajout de Bootstrap CSS via CDN si pas déjà fait dans base.html.twig -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<div class="container mt-5">
    <!-- Section bienvenue avec le nom de l'utilisateur -->
    <div class="text-center mb-4">
        <h1>Bienvenue, <strong>{{ app.user.prenom }}</strong> !</h1>
        <p class="lead">Voici votre tableau de bord Administrateur.</p>
    </div>

    <!-- Boutons de navigation -->
    <div class="d-flex justify-content-center mb-4">
        <button type="button" class="btn btn-primary btn-lg me-3" onclick="window.location.href='{{ path('produit_catalogue') }}'">Voir le Catalogue</button>
        <button type="button" class="btn btn-success btn-lg me-3" onclick="window.location.href='{{ path('commande') }}'">Voir les Commandes</button>
        <button type="button" class="btn btn-danger btn-lg" id="deconnexion-btn">Déconnexion</button>
    </div>

    <!-- Section Produits en Vogue -->
    <div class="mt-5">
        <h2 class="text-center mb-4">Produits en Vogue</h2>
        <div class="row">
            {% for produitData in produitsEnVogue %}
                {% set produit = produitData[0] %}
                <div class="col-md-4 mb-4">
                    <div class="card shadow-sm border-light rounded">
                        <!-- Image redimensionnée à 32x32 px -->
                        <img class="card-img-top" src="{{ produit.image }}" alt="{{ produit.nom }}" style="width: 32px; height: 32px; object-fit: cover; margin: 0 auto;">
                        <div class="card-body">
                            <h5 class="card-title">{{ produit.nom }}</h5>
                            <p class="card-text">Vendu {{ produitData.totalVentes }} fois</p>
                            <a href="{{ path('produit_catalogue') }}" class="btn btn-primary w-100">Voir le produit</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- Ajout de Bootstrap JS via CDN pour les composants interactifs -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

{% endblock %}
