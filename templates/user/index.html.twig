{% extends 'base.html.twig' %}

{% block title %}Hello UserController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <h1>Bienvenue !</h1>

    This friendly message is coming from:
    <ul>
        <li>Your controller at <code>C:/wamp64/www/site-ap-vente-test/src/Controller/UserController.php</code></li>
        <li>Your template at <code>C:/wamp64/www/site-ap-vente-test/templates/user/index.html.twig</code></li>
    </ul>
</div>

<button type="button" onclick="window.location.href='{{ path('produit_catalogue') }}'">Catalogue</button>


{% if app.user %}
    <button type="button" id="deconnexion-btn">Déconnexion</button>

<script>
    document.querySelector('#deconnexion-btn').addEventListener('click', function(event) {
        if (!confirm('Êtes-vous sûr de vouloir vous déconnecter ? Votre panier sera perdu.')) {
            event.preventDefault(); // Annuler la déconnexion si l'utilisateur refuse
        } else {
            window.location.href = '{{ path('app_logout') }}'; // Rediriger vers la route de déconnexion
        }
    });
</script>

{% else %}
    <button type="button" onclick="window.location.href='{{ path('app_register') }}'">S'inscrire</button>
    <button type="button" onclick="window.location.href='{{ path('app_login') }}'">Se connecter</button>
{% endif %}

{% endblock %}
